<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../lib/layui-v2.5.6/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
</head>
<body>
<div class="layuimini-container">
    <div class="layuimini-main">
        <!--<div style="margin-top:70px;" id="product"></div>-->
        <div class="layui-fluid">
            <div class="layui-card">
                <div class="layui-card-body" style="padding-top: 40px;">
                    <div class="layui-carousel" style="margin: 0px auto; width: 100%; height: 800px; background-color: transparent;">
                        <div class="layui-this">
                            <form class="layui-form" style="margin: 0 auto;max-width: 900px;padding-top: 40px;">
                                <div id="product" class="layui-form-item" style="margin:auto; margin-bottom:130px; height:450px;"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../lib/layui-v2.5.6/layui.js" charset="utf-8"></script>
<script charset="utf-8" src="../js/lay-config.js"></script>
<script charset="utf-8" src="../js/admin.js"></script>

<script>
    layui.use(['jquery', 'layer', 'form', 'cascader', 'laypage', 'miniTab'], function () {
        var $ = layui.jquery,
            layer = layui.layer,
            form = layui.form,
            cascader = layui.cascader,
            miniTab = layui.miniTab;

        miniTab.listen();

        //加载数据
        var query = window.location.search.substring(1);
        var id = query.split("=");
        renderProduct(id[1]);


        //渲染展示商品的html页面
        function renderProductHtml(data) {
            var str = "";//用来存储html内容
            str += "<div class='layui-inline' style='max-width: 450px'>" +
                "<img alt='' src='" + data.mainPic + "' width='400px' height='450px'/></div>";
            str += "<div class='layui-inline' style='max-width: 350px'>" +
                "<div><label>商品名称:</label><span>" + data.name + "</span></div>";
            str += "<div><label>价格:</label><span style='color:#FF3030;'>￥" + data.price + "</span></div>";
            str += "<label>库存:</label><span style='color:#CDC9C9;'>" + data.stock + "</span></div>";
            str += "<div style='display:none;'><label>商品ID:</label><span>" + data.id + "</span></div></div></div>";
            $("#product").html(str);
        }


        //同步加载商品数据
        function renderProduct(id) {
            $.ajax({
                async: false,
                contentType: "application/json",
                url: '/api/product/detail',
                data: {"id": id},
                type: 'GET',
                success: function (result) {
                    resData = result.data;
                    console.log(resData);
                    renderProductHtml(resData);
                }
            });
        }


    });

</script>

</body>
</html>